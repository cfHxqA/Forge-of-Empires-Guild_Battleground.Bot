// ==UserScript==
// @name        BotNix - FoE-Helper.Bot
// @namespace   BotNix.FoE_Helper
// @version     4.0.0.1
//
// @author      cfHxqA
// @copyright   2013 - 2025 (C) cfHxqA
//
// @downloadURL https://raw.githubusercontent.com/cfHxqA/Forge-of-Empires-Helper.Bot/refs/heads/main/tampermonkey.user.js
// @updateURL   https://raw.githubusercontent.com/cfHxqA/Forge-of-Empires-Helper.Bot/refs/heads/main/tampermonkey.user.js
//
// @require     https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js
// @require     https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js
//
// @match       *://*.forgeofempires.com/game/index*
// @match       *://*.forgeofempires.com/socket/
//
// @grant       GM.deleteValue
// @grant       GM.getValue
// @grant       GM.setValue
// @grant       GM.cookie
// @grant       GM.xmlHttpRequest
// @grant       unsafeWindow
//
// @run-at      document-start
// ==/UserScript==
function _0x4208(_0x980808,_0x145dfa){const _0x59aa42=_0x59aa();return _0x4208=function(_0x4208e8,_0x2ddfe4){_0x4208e8=_0x4208e8-0x1c5;let _0x100277=_0x59aa42[_0x4208e8];return _0x100277;},_0x4208(_0x980808,_0x145dfa);}function _0x59aa(){const _0x354091=['$1(\x22Client-Identification-SID\x22,\x20\x22','ERROR\x20|\x20Necessary\x20changes\x20were\x20not\x20applied!\x20Please\x20wait...','reload','replace','INFO\x20|\x20Necessary\x20changes\x20have\x20been\x20successfully\x20applied!','1346387SoxoBq','location','onGameLoaded','1899ytDJRW','undefined','src','No\x20jQuery!\x20Aborting!','setValue','ForgeHX-','type','url','filter','onTranslationsLoaded','INFO\x20|\x20Validate\x20that\x20the\x20necessary\x20changes\x20have\x20been\x20applied...','length','23104521nRaNRd','YYYY-MM-DD\x20HH:mm:ss','assign','GET','getValue','42TcaRrb','list','script','format','value','hasOwnProperty','cRetry','text/javascript','4570sfhbkq','match','xmlHttpRequest','createElement','http://127.0.0.1/game/','innerHTML','136655krOjkJ','object','gettextCatalog','52utixDy','toString','176160UyiXON','call','18YrCTbS','[BotNix\x20-\x20FoE-Helper.Bot][','70163cAQulx','sid','body','response','$1\x27ws://127.0.0.1/socket/\x27,','slice','BotNix_FoE_Helper','405432GWSDMQ'];_0x59aa=function(){return _0x354091;};return _0x59aa();}const _0x1e709e=_0x4208;(function(_0x1919d3,_0x4f3e2e){const _0x586d39=_0x4208,_0x391114=_0x1919d3();while(!![]){try{const _0x5681f0=-parseInt(_0x586d39(0x1dc))/0x1*(parseInt(_0x586d39(0x1c5))/0x2)+-parseInt(_0x586d39(0x1e3))/0x3+-parseInt(_0x586d39(0x1d6))/0x4*(parseInt(_0x586d39(0x1d3))/0x5)+-parseInt(_0x586d39(0x1da))/0x6*(-parseInt(_0x586d39(0x1e9))/0x7)+-parseInt(_0x586d39(0x1d8))/0x8+parseInt(_0x586d39(0x1ec))/0x9*(parseInt(_0x586d39(0x1cd))/0xa)+parseInt(_0x586d39(0x1f8))/0xb;if(_0x5681f0===_0x4f3e2e)break;else _0x391114['push'](_0x391114['shift']());}catch(_0x553697){_0x391114['push'](_0x391114['shift']());}}}(_0x59aa,0xc0603));if(_0x1e709e(0x1ed)==typeof jQuery)throw new(_0x1e709e(0x1ef))();(async function(){'use strict';const _0xb28377=_0x1e709e;if(await GM[_0xb28377(0x1fc)](_0xb28377(0x1e2),null)==null||Object['prototype'][_0xb28377(0x1d7)][_0xb28377(0x1d9)](await GM['getValue'](_0xb28377(0x1e2),null))[_0xb28377(0x1e1)](0x8)[_0xb28377(0x1e1)](0x0,-0x1)['toLowerCase']()!=_0xb28377(0x1d4))GM[_0xb28377(0x1f0)]('BotNix_FoE_Helper',{});let _0x1e85e9=_0x34997b=>console['log'](_0xb28377(0x1db)+moment(new Date())[_0xb28377(0x1c8)](_0xb28377(0x1f9))+']\x20'+_0x34997b);function _0x5076e9(_0x178d7c){return new Promise((_0x4a8d4c,_0x16af4a)=>{const _0x447b19=_0x4208;GM[_0x447b19(0x1cf)](Object[_0x447b19(0x1fa)]({'method':_0x447b19(0x1fb)},_0x178d7c[_0x447b19(0x1f3)]?_0x178d7c:{'url':_0x178d7c},{'onload':_0x4ca584=>_0x4a8d4c(_0x4ca584[_0x447b19(0x1df)]),'onerror':_0x16af4a,'ontimeout':_0x16af4a}));});}_0x1e85e9(_0xb28377(0x1f6)),setTimeout(async function(){const _0x1c6927=_0xb28377;let _0x41fc38=await GM[_0x1c6927(0x1fc)](_0x1c6927(0x1e2),null);if(_0x41fc38==null)throw'SETTINGS\x20CAN\x27T\x20BE\x20INITIALIZED';if(!_0x41fc38[_0x1c6927(0x1ca)](_0x1c6927(0x1cb)))_0x41fc38[_0x1c6927(0x1cb)]=0x1;$('script[src*=\x22.js\x22]')[_0x1c6927(0x1f4)]((_0x1e9571,_0x24b94f)=>$(_0x24b94f)['attr'](_0x1c6927(0x1ee))['includes'](_0x1c6927(0x1f1)))[_0x1c6927(0x1f7)]>0x0&&(_0x1e85e9(_0x1c6927(0x1e5)),_0x41fc38[_0x1c6927(0x1cb)]<0x3?(_0x41fc38[_0x1c6927(0x1cb)]++,GM[_0x1c6927(0x1f0)]('BotNix_FoE_Helper',_0x41fc38),unsafeWindow[_0x1c6927(0x1ea)][_0x1c6927(0x1e6)]()):(_0x1e85e9('ERROR\x20|\x20Necessary\x20changes\x20were\x20not\x20applied!'),delete _0x41fc38[_0x1c6927(0x1cb)],GM[_0x1c6927(0x1f0)](_0x1c6927(0x1e2),_0x41fc38)));},0x1388);try{let _0x2de8c5=unsafeWindow[_0xb28377(0x1f5)][_0xb28377(0x1d7)]()[_0xb28377(0x1ce)](/https:\/\/\w+\.innogamescdn\.com\/cache\/ForgeHX-\w+\.js/)[0x0];unsafeWindow[_0xb28377(0x1f5)]=async function(_0x42b703){const _0x100278=_0xb28377;unsafeWindow[_0x100278(0x1d5)]=_0x42b703;let _0x59a19a=await _0x5076e9(_0x2de8c5),_0xecc757=await GM['cookie'][_0x100278(0x1c6)]({'domain':location['host'],'name':_0x100278(0x1dd)});if(_0xecc757[0x0]?.['value']==undefined)throw'SESSION-ID\x20CAN\x27T\x20BE\x20READ.\x20CHECK\x20TAMPERMONKEY\x20SETTINGS.';_0x59a19a=_0x59a19a[_0x100278(0x1e7)](/(new .+)\("Content-Type","application\/json"\)/,_0x100278(0x1e4)+_0xecc757[0x0]?.[_0x100278(0x1c9)]+'\x22)');const _0x4be8c1=document[_0x100278(0x1d0)](_0x100278(0x1c7));_0x4be8c1[_0x100278(0x1f2)]=_0x100278(0x1cc),_0x4be8c1[_0x100278(0x1d2)]=_0x59a19a,document[_0x100278(0x1de)]['append'](_0x4be8c1);let _0x54c81f=unsafeWindow[_0x100278(0x1eb)][_0x100278(0x1d7)]();_0x54c81f=_0x54c81f['replace'](/https:\/\/\w+\.forgeofempires\.com\/game\//,_0x100278(0x1d1)),_0x54c81f=_0x54c81f[_0x100278(0x1e7)](/(socketGatewayUrl: ).+socket\/',/,_0x100278(0x1e0)),unsafeWindow[_0x100278(0x1eb)]=function(){},eval(''+_0x54c81f['match'](/onGameLoaded\(\) {(.*)}/s)[0x1]),_0x1e85e9(_0x100278(0x1e8));let _0x3603b4=await GM['getValue'](_0x100278(0x1e2),null);delete _0x3603b4[_0x100278(0x1cb)],GM[_0x100278(0x1f0)](_0x100278(0x1e2),_0x3603b4);};}catch(_0x4b7ba5){throw _0x4b7ba5;}}());